{"version":3,"file":"punchclock_setup.min.js","sources":["../src/punchclock_setup.js"],"sourcesContent":["/**\n * Creates a time block for \"block2time\" and appends it to the document.\n * This function generates a structured HTML form element dynamically.\n */\nfunction createTimeBlock2() {\n    const container = document.createElement('div');\n    container.id = 'fgroup_id_block2time';\n    container.className = 'mb-3 row fitem';\n    container.setAttribute('data-groupname', 'block2time');\n\n    const labelDiv = document.createElement('div');\n    labelDiv.className = 'col-md-3 col-form-label d-flex pb-0 pe-md-0';\n    labelDiv.innerHTML = `\n        <p id=\"fgroup_id_block2time_label\" class=\"mb-0 word-break\" aria-hidden=\"true\" style=\"cursor: default;\">\n            Set second time block\n        </p>\n        <div class=\"form-label-addon d-flex align-items-center align-self-start\"></div>\n    `;\n\n    const inputDiv = document.createElement('div');\n    inputDiv.className = 'col-md-9 d-flex flex-wrap align-items-start felement';\n    inputDiv.setAttribute('data-fieldtype', 'group');\n\n    const fieldset = document.createElement('fieldset');\n    fieldset.className = 'w-100 m-0 p-0 border-0';\n    fieldset.innerHTML = `<legend class=\"sr-only\">Set second time block</legend>`;\n\n    const timeDiv = document.createElement('div');\n    timeDiv.className = 'd-flex flex-wrap align-items-center';\n\n    timeDiv.innerHTML = `\n        From: \n        ${createSelect('starthour2', 0, 23)}\n        ${createSelect('startminute2', 0, 59)}\n        - To: \n        ${createSelect('endhour2', 0, 23)}\n        ${createSelect('endminute2', 0, 59)}\n    `;\n\n    fieldset.appendChild(timeDiv);\n    inputDiv.appendChild(fieldset);\n    container.appendChild(labelDiv);\n    container.appendChild(inputDiv);\n\n    const sectionField = document.getElementById('id_sessionconfigcontainer');\n    sectionField.appendChild(container);\n}\n\n/**\n * Creates a select dropdown element with numeric options.\n *\n * @param {string} name - The name and ID for the select element.\n * @param {number} min - The minimum value for the select options.\n * @param {number} max - The maximum value for the select options.\n * @returns {string} The HTML string for the select element.\n */\nfunction createSelect(name, min, max) {\n    let selectHTML= `<div class=\"mb-3  fitem\" >`;\n    selectHTML += `<select class=\"custom-select\" name=\"${name}\" id=\"id_${name}\">`;\n    for (let i = min; i <= max; i++) {\n        selectHTML += `<option value=\"${i}\">${i}</option>`;\n    }\n    selectHTML += `</select>`;\n    selectHTML += `</div>`;\n\n    return selectHTML;\n}\n\n/**\n * Removes the exception block, including description, start date, end date fields,\n * as well as the delete button section and divider section.\n *\n * @param {number} index - The index of the exception block to remove.\n * @param {HTMLElement} deleteButtonSection - The section containing the delete button.\n * @param {HTMLElement} dividerSection - The divider section separating exception blocks.\n */\nfunction removeExceptionBlock (index, deleteButtonSection, dividerSection) {\n    let descriptionField = document.getElementById(`fitem_id_description_${index}`);\n    let startDateField = document.getElementById(`fitem_id_startdate_${index}`);\n    let endDateField = document.getElementById(`fitem_id_enddate_${index}`);\n\n    [descriptionField, startDateField, endDateField, deleteButtonSection, dividerSection].forEach(element => {\n        if (element) {\n            element.remove();\n        }\n    });\n}\n\ndefine([], function() {\n    return {\n        init: function() {\n            document.getElementById('id_addsessionblocks').addEventListener('change', function() {\n                if (this.value === \"1\") {\n                    const secondBlock = document.getElementById(\"fgroup_id_block2time\");\n\n                    if (secondBlock) {\n                        secondBlock.remove();\n                    }\n                }\n                if (this.value === '2') {\n                    createTimeBlock2();\n                }\n            });\n\n            let customButton = document.getElementById(\"add-holiday-button\");\n            let defaultButton = document.getElementById(\"id_exception_add_fields\");\n            let RemoveExceptionButtons = document.querySelectorAll('#remove-exception-button');\n\n            if (RemoveExceptionButtons[0]) {\n                let parent = RemoveExceptionButtons[0].parentElement;\n                parent.className = \"d-none\";\n            }\n\n            RemoveExceptionButtons.forEach(button => {\n                button.addEventListener('click', function() {\n                    let parent = this.parentElement;\n                    let previousSibling = parent.previousElementSibling;\n                    let divider = parent.nextElementSibling;\n                    let sectionIndex = previousSibling.dataset.groupname.match(/\\d+/)[0];\n\n                    removeExceptionBlock(sectionIndex, parent, divider);\n                });\n            });\n\n            if (customButton && defaultButton) {\n                customButton.addEventListener(\"click\", function() {\n                    defaultButton.click();\n                });\n            }\n        }\n    };\n});"],"names":["createSelect","name","min","max","selectHTML","i","define","init","document","getElementById","addEventListener","this","value","secondBlock","remove","container","createElement","id","className","setAttribute","labelDiv","innerHTML","inputDiv","fieldset","timeDiv","appendChild","createTimeBlock2","customButton","defaultButton","RemoveExceptionButtons","querySelectorAll","parentElement","forEach","button","parent","previousSibling","previousElementSibling","divider","nextElementSibling","sectionIndex","dataset","groupname","match","index","deleteButtonSection","dividerSection","element","click"],"mappings":"AAwDA,SAASA,aAAaC,KAAMC,IAAKC,SACzBC,wCACJA,0DAAqDH,yBAAgBA,eAChE,IAAII,EAAIH,IAAKG,GAAKF,IAAKE,IACxBD,qCAAgCC,eAAMA,sBAE1CD,wBACAA,qBAEOA,WAuBXE,yCAAO,IAAI,iBACA,CACHC,KAAM,WACFC,SAASC,eAAe,uBAAuBC,iBAAiB,UAAU,cACnD,MAAfC,KAAKC,MAAe,OACdC,YAAcL,SAASC,eAAe,wBAExCI,aACAA,YAAYC,SAGD,MAAfH,KAAKC,OA/FzB,iBACUG,UAAYP,SAASQ,cAAc,OACzCD,UAAUE,GAAK,uBACfF,UAAUG,UAAY,iBACtBH,UAAUI,aAAa,iBAAkB,oBAEnCC,SAAWZ,SAASQ,cAAc,OACxCI,SAASF,UAAY,8CACrBE,SAASC,oRAOHC,SAAWd,SAASQ,cAAc,OACxCM,SAASJ,UAAY,uDACrBI,SAASH,aAAa,iBAAkB,eAElCI,SAAWf,SAASQ,cAAc,YACxCO,SAASL,UAAY,yBACrBK,SAASF,yEAEHG,QAAUhB,SAASQ,cAAc,OACvCQ,QAAQN,UAAY,sCAEpBM,QAAQH,8CAEFrB,aAAa,aAAc,EAAG,yBAC9BA,aAAa,eAAgB,EAAG,yCAEhCA,aAAa,WAAY,EAAG,yBAC5BA,aAAa,aAAc,EAAG,cAGpCuB,SAASE,YAAYD,SACrBF,SAASG,YAAYF,UACrBR,UAAUU,YAAYL,UACtBL,UAAUU,YAAYH,UAEDd,SAASC,eAAe,6BAChCgB,YAAYV,WAuDTW,UAIJC,aAAenB,SAASC,eAAe,sBACvCmB,cAAgBpB,SAASC,eAAe,2BACxCoB,uBAAyBrB,SAASsB,iBAAiB,+BAEnDD,uBAAuB,GAAI,CACdA,uBAAuB,GAAGE,cAChCb,UAAY,SAGvBW,uBAAuBG,SAAQC,SAC3BA,OAAOvB,iBAAiB,SAAS,eACzBwB,OAASvB,KAAKoB,cACdI,gBAAkBD,OAAOE,uBACzBC,QAAUH,OAAOI,mBACjBC,aAAeJ,gBAAgBK,QAAQC,UAAUC,MAAM,OAAO,GA1CtF,IAA+BC,MAAOC,oBAAqBC,eAA5BF,MA4CUJ,aA5CHK,oBA4CiBV,OA5CIW,eA4CIR,SA3CpC7B,SAASC,8CAAuCkC,QAClDnC,SAASC,4CAAqCkC,QAChDnC,SAASC,0CAAmCkC,QAEdC,oBAAqBC,gBAAgBb,SAAQc,UACtFA,SACAA,QAAQhC,kBAyCJa,cAAgBC,eAChBD,aAAajB,iBAAiB,SAAS,WACnCkB,cAAcmB"}