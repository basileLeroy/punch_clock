{"version":3,"file":"punchclock_setup.min.js","sources":["../src/punchclock_setup.js"],"sourcesContent":["/**\n * Remove default buttons since custom buttons are used.\n * @param {Array} buttons - List of buttons to remove\n */\nfunction removeDefaultButtons(buttons) {\n    buttons.forEach(button => {\n        if (button) {\n            let buttonBox = button.parentElement.parentElement;\n            buttonBox.className = \"d-none\";\n        }\n    });\n}\n\n/**\n * Use the click event of the custom button to trigger the default click action.\n * @param {HTMLElement} customButton - The custom button\n * @param {HTMLElement} defaultButton - The default button\n */\nfunction redirectCustomButtonToDefaultAction(customButton, defaultButton) {\n    if (customButton && defaultButton) {\n        customButton.addEventListener(\"click\", function() {\n            defaultButton.click();\n        });\n    }\n}\n\n/**\n * Time Block Button Visibilty controller. Hides the button once a second time block has been added.\n * @param {HTMLElement} button - The button elelement to add new timeblocks\n * @param {HTMLElement} counterElement - A counter field keeping track of the time blocks\n * @param {int} maxCount - The max amount of sections allowed before hiding the button\n */\nfunction updateButtonVisibility(button, counterElement, maxCount) {\n    let counter = parseInt(counterElement.value, 10);\n\n    if (counter >= maxCount) {\n        let buttonBox = button.parentElement.parentElement;\n        buttonBox.className = \"d-none\";\n    }\n}\n\ndefine([], function() {\n    return {\n        init: function() {\n            let addTimeBlockDefaultButton = document.getElementById(\"id_timeblock_add_fields\");\n            let addTimeBlockCustomButton = document.getElementById(\"add-timeblock-button\");\n            let addHolidayDefaultButton = document.getElementById(\"id_holiday_add_fields\");\n            let addHolidayCustomButton = document.getElementById(\"add-holiday-button\");\n\n            removeDefaultButtons([addHolidayDefaultButton, addTimeBlockDefaultButton]);\n\n            redirectCustomButtonToDefaultAction(addTimeBlockCustomButton, addTimeBlockDefaultButton);\n            redirectCustomButtonToDefaultAction(addHolidayCustomButton, addHolidayDefaultButton);\n\n            const timeblockCounter = document.querySelector('[name=\"timeblock_repeats\"]');\n            const holidaysCounter = document.querySelector('[name=\"holiday_repeats\"]');\n\n            updateButtonVisibility(addTimeBlockCustomButton, timeblockCounter, 2);\n            updateButtonVisibility(addHolidayCustomButton, holidaysCounter, 4);\n        },\n        bulk: function() {\n            let addTimeBlockDefaultButton = document.getElementById(\"id_timeblock_add_fields\");\n            let addTimeBlockCustomButton = document.getElementById(\"add-timeblock-button\");\n\n            removeDefaultButtons([addTimeBlockDefaultButton]);\n            redirectCustomButtonToDefaultAction(addTimeBlockCustomButton, addTimeBlockDefaultButton);\n\n            const timeblockCounter = document.querySelector('[name=\"timeblock_repeats\"]');\n\n            updateButtonVisibility(addTimeBlockCustomButton, timeblockCounter, 2);\n        }\n    };\n});"],"names":["removeDefaultButtons","buttons","forEach","button","parentElement","className","redirectCustomButtonToDefaultAction","customButton","defaultButton","addEventListener","click","updateButtonVisibility","counterElement","maxCount","parseInt","value","define","init","addTimeBlockDefaultButton","document","getElementById","addTimeBlockCustomButton","addHolidayDefaultButton","addHolidayCustomButton","timeblockCounter","querySelector","holidaysCounter","bulk"],"mappings":"AAIA,SAASA,qBAAqBC,SAC1BA,QAAQC,SAAQC,YACRA,OAAQ,CACQA,OAAOC,cAAcA,cAC3BC,UAAY,aAUlC,SAASC,oCAAoCC,aAAcC,eACnDD,cAAgBC,eAChBD,aAAaE,iBAAiB,SAAS,WACnCD,cAAcE,WAW1B,SAASC,uBAAuBR,OAAQS,eAAgBC,aACtCC,SAASF,eAAeG,MAAO,KAE9BF,SAAU,CACLV,OAAOC,cAAcA,cAC3BC,UAAY,UAI9BW,yCAAO,IAAI,iBACA,CACHC,KAAM,eACEC,0BAA4BC,SAASC,eAAe,2BACpDC,yBAA2BF,SAASC,eAAe,wBACnDE,wBAA0BH,SAASC,eAAe,yBAClDG,uBAAyBJ,SAASC,eAAe,sBAErDpB,qBAAqB,CAACsB,wBAAyBJ,4BAE/CZ,oCAAoCe,yBAA0BH,2BAC9DZ,oCAAoCiB,uBAAwBD,+BAEtDE,iBAAmBL,SAASM,cAAc,8BAC1CC,gBAAkBP,SAASM,cAAc,4BAE/Cd,uBAAuBU,yBAA0BG,iBAAkB,GACnEb,uBAAuBY,uBAAwBG,gBAAiB,IAEpEC,KAAM,eACET,0BAA4BC,SAASC,eAAe,2BACpDC,yBAA2BF,SAASC,eAAe,wBAEvDpB,qBAAqB,CAACkB,4BACtBZ,oCAAoCe,yBAA0BH,2BAI9DP,uBAAuBU,yBAFEF,SAASM,cAAc,8BAEmB"}