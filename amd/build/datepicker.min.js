define("mod_punchclock/datepicker",[],(function(){return{init:function(){const datepicker=document.querySelector(".datepicker"),dateInput=document.querySelector(".date-input");if(!datepicker||!dateInput)return;const yearInput=datepicker.querySelector(".year-input"),monthInput=datepicker.querySelector(".month-input"),applyBtn=datepicker.querySelector(".apply"),cancelBtn=datepicker.querySelector(".cancel"),prevBtn=datepicker.querySelector(".prev"),nextBtn=datepicker.querySelector(".next"),dates=datepicker.querySelector(".dates");if(!(yearInput&&monthInput&&applyBtn&&cancelBtn&&prevBtn&&nextBtn&&dates))return;let selectedDate=new Date,year=selectedDate.getFullYear(),month=selectedDate.getMonth();const handleDateClick=event=>{event.preventDefault();const button=event.target,selected=dates.querySelector(".selected");selected&&selected.classList.remove("selected"),button.classList.add("selected"),selectedDate=new Date(year,month,parseInt(button.textContent))},createBtn=function(text){let isDisabled=arguments.length>1&&void 0!==arguments[1]&&arguments[1],isToday=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const btn=document.createElement("button");return btn.textContent=text,btn.disabled=isDisabled,btn.classList.toggle("today",isToday),btn},displayDates=()=>{monthInput.selectedIndex=month,yearInput.value=year,dates.innerHTML="";const lastOfPrevMonth=new Date(year,month,0);for(let i=0;i<=lastOfPrevMonth.getDay();i++){const text=lastOfPrevMonth.getDate()-lastOfPrevMonth.getDay()+i,button=createBtn(text,!0,!1);dates.appendChild(button)}const lastOfMonth=new Date(year,month+1,0);for(let i=1;i<=lastOfMonth.getDate();i++){const isToday=selectedDate.getDate()===i&&selectedDate.getFullYear()===year&&selectedDate.getMonth()===month,button=createBtn(i,!1,isToday);button.addEventListener("click",handleDateClick),dates.appendChild(button)}const firstOfNextMonth=new Date(year,month+1,1);for(let i=firstOfNextMonth.getDay();i<7;i++){const text=firstOfNextMonth.getDate()-firstOfNextMonth.getDay()+i,button=createBtn(text,!0,!1);dates.appendChild(button)}};displayDates(),monthInput.addEventListener("change",(event=>{event.preventDefault(),month=monthInput.selectedIndex,displayDates()})),yearInput.addEventListener("change",(event=>{event.preventDefault(),year=yearInput.value,displayDates()})),nextBtn.addEventListener("click",(event=>{event.preventDefault(),11===month&&year++,month=(month+1)%12,displayDates()})),prevBtn.addEventListener("click",(event=>{event.preventDefault(),0===month&&year--,month=(month-1+12)%12,displayDates()})),dateInput.addEventListener("click",(event=>{event.preventDefault(),datepicker.hidden=!datepicker.hidden})),applyBtn.addEventListener("click",(event=>{event.preventDefault();const unixTimestamp=Math.floor(Date.UTC(selectedDate.getFullYear(),selectedDate.getMonth(),selectedDate.getDate(),selectedDate.getHours(),selectedDate.getMinutes(),selectedDate.getSeconds())/1e3),url=new URL(window.location),params=new URLSearchParams(url.search);params.set("date",unixTimestamp),window.location.href=`${url.pathname}?${params.toString()}`,datepicker.hidden=!0})),cancelBtn.addEventListener("click",(event=>{event.preventDefault(),datepicker.hidden=!0}))}}}));

//# sourceMappingURL=datepicker.min.js.map