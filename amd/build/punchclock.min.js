define("mod_punchclock/punchclock",["exports","core/ajax","core/notification"],(function(_exports,_ajax,_notification){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_ajax=_interopRequireDefault(_ajax),_notification=_interopRequireDefault(_notification);_exports.init=()=>{const intervals={};["morning-start","afternoon-start"].forEach((type=>{const clock=document.getElementById(`clock-${type}`),button=document.getElementById(`punchclock-button-${type}`);function updateClock(){const now=new Date;clock.innerText=now.toLocaleTimeString()}updateClock(),intervals[type]=setInterval(updateClock,1e3),button.addEventListener("click",(()=>{clearInterval(intervals[type]),button.disabled=!0;const punchedTime=clock.innerText,courseId=button.dataset.courseid,punchclockId=button.dataset.punchclockid;_ajax.default.call([{methodname:"mod_punchclock_log_punch",args:{courseid:courseId,punchclockid:punchclockId,type:type,time:punchedTime}}])[0].then((response=>{console.log("Punch logged:",response)})).catch(_notification.default.exception)}))}))}}));

//# sourceMappingURL=punchclock.min.js.map