{"version":3,"file":"bulkselect.min.js","sources":["../src/bulkselect.js"],"sourcesContent":["/**\n * @fileoverview Handles bulk selection and updating button counts for bulk edit and delete actions.\n */\n\nconst bulkEditBtn = document.querySelector('.bulkeditbtn'); // Button for editing selected items\nconst bulkDeleteBtn = document.querySelector('.bulkdeletebtn'); // Button for deleting selected items\nconst selectAll = document.querySelector(\".selectallrows\"); // \"Select All\" checkbox\nconst listOfRows = document.querySelectorAll(\".selectrow\"); // List of row checkboxes\n\n/**\n * Toggles the selection of all checkboxes based on the \"Select All\" checkbox state.\n */\nconst toggleAllCheckboxes = () => {\n    if (!selectAll) {\n        return;\n    }\n    const isChecked = selectAll.checked;\n\n    listOfRows.forEach(checkbox => {\n        checkbox.checked = isChecked;\n    });\n};\n\n/**\n * Updates the text content of the bulk edit and delete buttons based on the number of selected rows.\n */\nconst updateBtnCount = () => {\n    if (!bulkEditBtn || !bulkDeleteBtn) {\n        return;\n    }\n\n    const selectedCount = document.querySelectorAll(\".selectrow:checked\").length;\n    bulkEditBtn.textContent = `Edit Selected (${selectedCount})`;\n    bulkDeleteBtn.textContent = `Delete Selected (${selectedCount})`;\n\n    const isDisabled = selectedCount === 0;\n    bulkEditBtn.disabled = isDisabled;\n    bulkDeleteBtn.disabled = isDisabled;\n};\n\n/**\n * Remove default buttons since custom buttons are used.\n * @param {Array} buttons - List of buttons to remove\n */\nfunction removeDefaultButtons(buttons) {\n    buttons.forEach(button => {\n        if (button) {\n            let buttonBox = button.parentElement.parentElement;\n            buttonBox.className = \"d-none\";\n        }\n    });\n}\n\n/**\n * Use the click event of the custom button to trigger the default click action.\n * @param {HTMLElement} customButton - The custom button\n * @param {HTMLElement} defaultButton - The default button\n */\nfunction redirectCustomButtonToDefaultAction(customButton, defaultButton) {\n    if (customButton && defaultButton) {\n        customButton.addEventListener(\"click\", function() {\n            defaultButton.click();\n        });\n    }\n}\n\n/**\n * Time Block Button Visibilty controller. Hides the button once a second time block has been added.\n * @param {HTMLElement} button - The button elelement to add new timeblocks\n * @param {HTMLElement} counterElement - A counter field keeping track of the time blocks\n * @param {int} maxCount - The max amount of sections allowed before hiding the button\n */\nfunction updateButtonVisibility(button, counterElement, maxCount) {\n    let counter = parseInt(counterElement.value, 10);\n\n    if (counter >= maxCount) {\n        let buttonBox = button.parentElement.parentElement;\n        buttonBox.className = \"d-none\";\n    }\n}\n\ndefine([], function() {\n    return {\n        init: function() {\n            if (!selectAll || !bulkEditBtn || !bulkDeleteBtn) {\n                return;\n            }\n\n            /**\n             * Event listener for the \"Select All\" checkbox.\n             * When clicked, it toggles all individual row checkboxes and updates the button count.\n             */\n            selectAll.addEventListener(\"click\", () => {\n                toggleAllCheckboxes();\n                updateBtnCount();\n            });\n\n            /**\n             * Event listener for each row checkbox.\n             * When clicked, it updates the bulk action button counts.\n             */\n            listOfRows.forEach(checkbox => {\n                checkbox.addEventListener(\"click\", updateBtnCount);\n            });\n\n            // Initialize button count on page load\n            updateBtnCount();\n        },\n        bulk: function() {\n            let addTimeBlockDefaultButton = document.getElementById(\"id_timeblock_add_fields\");\n            let addTimeBlockCustomButton = document.getElementById(\"add-timeblock-button\");\n\n            removeDefaultButtons([addTimeBlockDefaultButton]);\n            redirectCustomButtonToDefaultAction(addTimeBlockCustomButton, addTimeBlockDefaultButton);\n\n            const timeblockCounter = document.querySelector('[name=\"timeblock_repeats\"]');\n\n            updateButtonVisibility(addTimeBlockCustomButton, timeblockCounter, 2);\n        }\n    };\n});"],"names":["bulkEditBtn","document","querySelector","bulkDeleteBtn","selectAll","listOfRows","querySelectorAll","updateBtnCount","selectedCount","length","textContent","isDisabled","disabled","define","init","addEventListener","isChecked","checked","forEach","checkbox","toggleAllCheckboxes","bulk","addTimeBlockDefaultButton","getElementById","addTimeBlockCustomButton","customButton","defaultButton","button","parentElement","className","click","timeblockCounter","maxCount","parseInt","value"],"mappings":"AAIA,MAAMA,YAAcC,SAASC,cAAc,gBACrCC,cAAgBF,SAASC,cAAc,kBACvCE,UAAYH,SAASC,cAAc,kBACnCG,WAAaJ,SAASK,iBAAiB,cAmBvCC,eAAiB,SACdP,cAAgBG,2BAIfK,cAAgBP,SAASK,iBAAiB,sBAAsBG,OACtET,YAAYU,qCAAgCF,mBAC5CL,cAAcO,uCAAkCF,yBAE1CG,WAA+B,IAAlBH,cACnBR,YAAYY,SAAWD,WACvBR,cAAcS,SAAWD,YA4C7BE,mCAAO,IAAI,iBACA,CACHC,KAAM,WACGV,WAAcJ,aAAgBG,gBAQnCC,UAAUW,iBAAiB,SAAS,KAhFpB,UACnBX,uBAGCY,UAAYZ,UAAUa,QAE5BZ,WAAWa,SAAQC,WACfA,SAASF,QAAUD,cA0EXI,GACAb,oBAOJF,WAAWa,SAAQC,WACfA,SAASJ,iBAAiB,QAASR,mBAIvCA,mBAEJc,KAAM,eACEC,0BAA4BrB,SAASsB,eAAe,2BACpDC,yBAA2BvB,SAASsB,eAAe,wBAlEnE,IAc6CE,aAAcC,cAsD1B,CAACJ,2BAnEtBJ,SAAQS,SACRA,SACgBA,OAAOC,cAAcA,cAC3BC,UAAY,aAUyBH,cAuDeJ,2BAvD7BG,aAuDGD,2BAtDxBE,eAChBD,aAAaV,iBAAiB,SAAS,WACnCW,cAAcI,iBAsDRC,iBAAmB9B,SAASC,cAAc,8BA3C5D,IAAgCyB,OAAwBK,SAAxBL,OA6CGH,yBA7CqBQ,SA6CuB,EA5C7DC,SA4C2CF,iBA5CnBG,MAAO,KAE9BF,WACKL,OAAOC,cAAcA,cAC3BC,UAAY"}